<%- include('partials/header.html') %>

    <div class="flex justify-between items-center mb-8">
        <div>
            <h1 class="text-3xl font-bold text-emerald-800">ูุฑุญุจุงูุ <%= user.name %>
            </h1>
            <p class="text-gray-600 mt-1">ูุฐู ูู ุงููุฌุงูุณ ุงูุชู ููุช ุจุฅูุดุงุฆูุง</p>
        </div>
        <a href="/create-session"
            class="bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2 rounded-lg shadow transition">
            + ุฅูุดุงุก ูุฌูุณ ุฌุฏูุฏ
        </a>
    </div>

    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        <% if (sessions.length===0) { %>
            <div class="col-span-full text-center py-12 bg-white rounded-xl shadow-sm border border-gray-100">
                <p class="text-gray-500 text-xl">ูู ุชูู ุจุฅูุดุงุก ุฃู ูุฌุงูุณ ุจุนุฏ.</p>
            </div>
            <% } %>

                <% sessions.forEach(session=> { %>
                    <div
                        class="bg-white rounded-xl shadow-md overflow-hidden border border-emerald-100 hover:shadow-lg transition relative flex flex-col h-full">
                        <div class="p-6 flex-grow">
                            <h2 class="text-xl font-bold text-emerald-900 mb-2 truncate">
                                <%= session.title %>
                            </h2>
                            <p class="text-gray-600 mb-4 truncate"><span class="font-semibold">ุงูุดูุฎ:</span>
                                <%= session.sheikh_name %>
                            </p>

                            <div class="flex justify-between text-sm text-gray-500 mb-4 bg-gray-50 p-2 rounded">
                                <span>๐ <%= session.date %></span>
                                <span>โฐ <%= session.start_time %></span>
                            </div>

                            <div class="flex gap-2">
                                <a href="/session/<%= session.id %>"
                                    class="flex-1 bg-emerald-100 hover:bg-emerald-200 text-emerald-900 text-center py-2 rounded-lg transition font-bold text-sm">
                                    ุฅุฏุงุฑุฉ
                                </a>
                                <a href="/session/edit/<%= session.id %>"
                                    class="bg-amber-100 hover:bg-amber-200 text-amber-900 px-3 py-2 rounded-lg transition"
                                    title="ุชุนุฏูู">
                                    โ๏ธ
                                </a>
                                <button onclick="confirmDelete('<%= session.id %>')"
                                    class="bg-red-100 hover:bg-red-200 text-red-900 px-3 py-2 rounded-lg transition"
                                    title="ุญุฐู">
                                    ๐๏ธ
                                </button>
                            </div>
                        </div>
                    </div>
                    <% }) %>
    </div>

    <!-- Hidden Delete Form -->
    <form id="deleteForm" method="POST" style="display: none;"></form>

    <script>
        function confirmDelete(id) {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงููุฌูุณุ ุณูุชู ุญุฐู ุฌููุน ุจูุงูุงุช ุงูุญุถูุฑ ูุงูุดูุงุฏุงุช ุงููุฑุชุจุทุฉ ุจู.')) {
                const form = document.getElementById('deleteForm');
                form.action = '/api/sessions/delete/' + id;
                form.submit();
            }
        }
    </script>

    <%- include('partials/footer.html') %>